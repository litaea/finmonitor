name: 12 月全球资产四时点监控

on:
  # 允许手动触发
  workflow_dispatch:

  # 定时触发 (工作日)
  schedule:
    # 北京时间 09:00 (周一至周五)
    - cron: '0 1 * * 1-5'
    # 北京时间 12:30 (周一至周五)
    - cron: '30 4 * * 1-5'
    # 北京时间 17:00 (周一至周五)
    - cron: '0 9 * * 1-5'
    # 北京时间 22:30 (周一至周五)
    - cron: '30 14 * * 1-5'

jobs:
  run-monitor:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Run asset monitor script
        env:
          FEISHU_WEBHOOK: ${{ secrets.FEISHU_WEBHOOK }}
          TUSHARE_TOKEN: ${{ secrets.TUSHARE_TOKEN }}
        run: python monitor.py
